!function(e){function t(t){for(var o,i,s=t[0],d=t[1],h=t[2],c=0,p=[];c<s.length;c++)i=s[c],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(o in d)Object.prototype.hasOwnProperty.call(d,o)&&(e[o]=d[o]);for(l&&l(t);p.length;)p.shift()();return n.push.apply(n,h||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],o=!0,s=1;s<a.length;s++){var d=a[s];0!==r[d]&&(o=!1)}o&&(n.splice(t--,1),e=i(i.s=a[0]))}return e}var o={},r={0:0},n=[];function i(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=o,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(a,o,function(t){return e[t]}.bind(null,o));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],d=s.push.bind(s);s.push=t,s=s.slice();for(var h=0;h<s.length;h++)t(s[h]);var l=d;n.push([13,1]),a()}({13:function(e,t,a){"use strict";a.r(t);a(7);var o=a(0),r=a(3),n=n||{};n.skyDomeShaderMaterial=function(){var e=["varying vec3 vWorldPosition;","void main() {","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","vWorldPosition = worldPosition.xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),t=["uniform vec3 topColor;","uniform vec3 bottomColor;","uniform float offset;","uniform float exponent;","varying vec3 vWorldPosition;","void main() {","float h = normalize( vWorldPosition + offset ).y;","gl_FragColor = vec4( mix( bottomColor, topColor, max( pow( max( h , 0.0), exponent ), 0.0 ) ), 1.0 );","}"].join("\n"),a={topColor:{type:"c",value:new o.Color(77)},bottomColor:{type:"c",value:new o.Color(15658734)},offset:{type:"f",value:5},exponent:{type:"f",value:.6}};return new o.ShaderMaterial({vertexShader:e,fragmentShader:t,uniforms:a,side:o.BackSide})};var i=a(6);class s{constructor(e,t){const a=new i.a(e,t);function o(){document.body.style.cursor="grabbing"}function r(){t.removeEventListener("mousemove",o,!1),document.body.style.cursor="default"}this.threeControls=a,this.camera=e,a.target.set(0,0,0),a.enableDamping=!0,a.rotateSpeed=.5,a.dampingFactor=.1,a.target.set(0,.7,0),a.maxPolarAngle=1.03*Math.PI/2,a.minDistance=1,a.maxDistance=150,a.keys={LEFT:65,UP:87,RIGHT:68,BOTTOM:83},t.addEventListener("mousedown",()=>{t.addEventListener("mousemove",o,!1),t.addEventListener("mouseup",r,!1),t.addEventListener("mouseout",r,!1)},!1)}}class d{constructor(e){this.container=e,this.threeRenderer=new o.WebGLRenderer({antialias:!0}),this.threeRenderer.outputEncoding=o.GammaEncoding,this.threeRenderer.setPixelRatio(window.devicePixelRatio),e.appendChild(this.threeRenderer.domElement),this.threeRenderer.shadowMap.enabled=!0,this.threeRenderer.shadowMap.type=o.PCFShadowMap,this.updateSize(),document.addEventListener("DOMContentLoaded",()=>this.updateSize(),!1),window.addEventListener("resize",()=>this.updateSize(),!1)}updateSize(){this.threeRenderer.setSize(window.innerWidth,window.innerHeight)}render(e,t){this.threeRenderer.render(e,t)}}class h{constructor(e){const t=e.domElement.width/e.domElement.height;this.threeCamera=new o.PerspectiveCamera(60,t,.1,1e3),this.threeCamera.position.set(1,4,18),this.updateSize(e),window.addEventListener("resize",()=>this.updateSize(e),!1)}updateSize(e){this.threeCamera.aspect=e.domElement.width/e.domElement.height,this.threeCamera.updateProjectionMatrix()}}class l{constructor(e,t,a){const r=new o.Vector2,n=new o.Raycaster;function i(e,t){const a=s(e,t);a.length>0&&null!=a[0].object.userData.interact&&a[0].object.userData.interact()}function s(a,o){return r.x=a/window.innerWidth*2-1,r.y=1-o/window.innerHeight*2,n.setFromCamera(r,t),n.intersectObjects(e.children,!0)}window.addEventListener("touchstart",(function(e){e.touches.length>0&&i(e.touches[0].pageX,e.touches[0].pageY)}),!0),window.addEventListener("mousemove",(function(e){const t=s(e.clientX,e.clientY);t.length>0&&null!=t[0].object.userData.interact?a.style.cursor="pointer":a.style.cursor="initial"}),!1),window.addEventListener("mousedown",(function(e){if(1===e.button)return;i(e.clientX,e.clientY)}),!1)}}var c=a(4),p=a.p+"img/3d7f09356ac3831b5cafd515759531fb.png";class w{constructor(e){const t=new o.TextureLoader,a=new c.a.Group({texture:{value:t.load(p)},fog:!0,maxParticleCount:1e4}),r=new c.a.Emitter({maxAge:{value:33},position:{value:new o.Vector3(0,30,0),spread:new o.Vector3(90,0,90)},rotation:{},acceleration:{value:new o.Vector3(0,-.02,0)},velocity:{value:new o.Vector3(0,-.4,0),spread:new o.Vector3(.5,-.01,.2)},color:{value:[new o.Color(13421823)]},opacity:{value:[1,.5]},size:{value:[.7,1],spread:[.05,.1]},activeMultiplier:.5,particleCount:1e4});a.addEmitter(r),r.enabled=!0,e.add(a.mesh),a.tick(16),this.emitter=r,this.particleGroup=a,this.stop=function(){r.disable()},this.start=function(){r.enable()},this.update=function(e){a&&a.tick(e)}}}var u=a.p+"img/3f320decee7b0d095b83f39257e5e983.jpg";var M=a(2),m=a.p+"audio/4bb23ea69815e0bcf8f21608be84e716.ogg";function f(e,t,a){const r=new o.AudioListener;a.add(r);const n=new o.Audio(r);(new o.AudioLoader).load(m,(function(e){n.setBuffer(e),n.setLoop(!1),n.setVolume(.5),n.play()})),new M.a.Tween(e.rotation).to({x:0,y:t,z:0},2e3).easing(M.a.Easing.Sinusoidal.InOut).start()}function g(e,t,a){new M.a.Tween(e.position).to({x:e.position.x+t,y:e.position.y,z:e.position.z+a},200).easing(M.a.Easing.Sinusoidal.InOut).start()}var S=a(1),x=a.p+"img/253d39d761472ad444b545d322b88f66.jpg",y=a.p+"img/85814aff9fb7cb82fe6b58858336fc63.jpg",v=a.p+"img/8a5170a72d2eba7782e95b0dce6058bc.jpg",G=a.p+"img/e05f71f0f459c1d35b74e64d227bc239.jpg",b=a.p+"img/d68e125dc66003701944fefaf2845f26.jpg";class C{constructor(e,t){this.interactionObjects=[],this.textureLoader=new o.TextureLoader,this.winery=this.createWinery(e,t)}createWinery(e,t){var a=new o.Group;return a.add(this.createFacade(e,t)),a}createFacade(e,t){let a=new o.Group,r=this.createMainWall();for(var n=0;n<19;++n){if(9===n)continue;let e=this.createWindow(3*n-27,0,-35.6,0);a.add(e.clone())}a.add(r),a.add(this.createLeftWall());for(n=0;n<3;++n){let e=this.createWindow(3*n-3-35,0,15-26.6,0);a.add(e.clone())}for(n=0;n<10;n++){let e=this.createWindow(-30.6,0,3*n-12-28,Math.PI/2);a.add(e.clone())}a.add(this.createRightWall());for(n=0;n<3;++n){let e=this.createWindow(3*n-3+35,0,15-26.6,0);a.add(e.clone())}for(n=0;n<10;n++){let e=this.createWindow(30.6,0,3*n-12-28,Math.PI/2);a.add(e.clone())}let i=this.createTower(e);a.add(i),a.add(this.createFloor());let s=e?3:4;for(var d=1;d<s;++d)for(n=0;n<3;++n){let e=this.createWindow(3*n-3,3*d,-35.6,0);a.add(e.clone())}return a.add(this.createRoof()),a.add(this.addRooms()),a.add(this.addDoor(t)),a.add(this.addBalcony()),a.add(this.addVisor(0,-21.4,1.1,-35.3)),a.add(this.addVisor(0,-12.4,1.1,-35.3)),a.add(this.addVisor(0,20.6,1.1,-35.3)),a.add(this.addVisor(0,11.6,1.1,-35.3)),a.add(this.addVisor(Math.PI/2,-30.4,1.1,-27.6)),a.add(this.addVisor(Math.PI/2,-30.4,1.1,-18.6)),a.add(this.addVisor(Math.PI/2,30.4,1.1,-27.6)),a.add(this.addVisor(Math.PI/2,30.4,1.1,-18.6)),a}createWindow(e,t,a,r){let n=new o.Group,i=this.textureLoader,s=new o.BoxGeometry(.3*3,.6*3,.1),d=new o.Mesh(s),h=i.load(x,(function(){d.material.needsUpdate=!0}));d.material.color.setHex(16777215),d.material.transparent=!0,d.material.opacity=.4,d.material.envMap=h,h.mapping=o.EquirectangularReflectionMapping,d.position.set(0,0,0),n.add(d);let l=this.getDarkWoodMaterial(),c=new o.BoxGeometry(.1,1.9,.5),p=new o.Mesh(c,l);return p.position.set(.15*3,0,0),n.add(p),p=p.clone(),p.position.set(3*-.15,0,0),n.add(p),n.rotateY(r),n.position.set(e,t,a),c=new o.BoxGeometry(.3*3,.1,.5),p=new o.Mesh(c,l),p.position.set(0,.3*3,0),n.add(p),p=p.clone(),p.position.set(0,3*-.3,0),n.add(p),c=new o.BoxGeometry(.3*3,.07,.2),p=new o.Mesh(c,l),p.position.set(0,3*-.15,0),n.add(p),n}createLeftWall(){const e=(new o.TextureLoader).load(y);e.wrapT=o.RepeatWrapping,e.wrapS=o.RepeatWrapping,e.repeat.set(10,1);let t=new o.MeshStandardMaterial({color:16777215,roughness:.5,flatShading:!0,vertexColors:!0,map:e}),a=new o.Group,r=new o.BoxGeometry(9,3,33),n=new o.Mesh(r,t.clone());n.updateMatrix();let i=this.createEmptyBox(n),s=new o.BoxGeometry(9,.2,.1),d=new o.Mesh(s);d.position.set(0,.9,16.5),d.updateMatrix();let h=S.CSG.fromMesh(d);i=i.union(h),d=new o.Mesh(s),d.position.set(0,.3,16.5),d.updateMatrix(),h=S.CSG.fromMesh(d),i=i.union(h),d=new o.Mesh(s),d.position.set(0,-.9,16.5),d.updateMatrix(),h=S.CSG.fromMesh(d),i=i.union(h),s=new o.BoxGeometry(.1,.2,33),d=new o.Mesh(s),d.position.set(4.5,.9,0),d.updateMatrix(),h=S.CSG.fromMesh(d),i=i.union(h),d=new o.Mesh(s),d.position.set(4.5,.3,0),d.updateMatrix(),h=S.CSG.fromMesh(d),i=i.union(h),d=new o.Mesh(s),d.position.set(4.5,-.9,0),d.updateMatrix(),h=S.CSG.fromMesh(d),i=i.union(h);let l=new o.BoxGeometry(.3*3,.6*3,4);for(var c=0;c<3;++c){let e=new o.Mesh(l.clone());e.position.set(3*c-3,0,15),e.updateMatrix();let t=S.CSG.fromMesh(e);i=i.subtract(t)}for(c=0;c<10;c++){let e=new o.Mesh(l.clone());e.rotateY(Math.PI/2),e.position.set(4.5,0,3*c-6),e.updateMatrix();let t=S.CSG.fromMesh(e);i=i.subtract(t)}return n=S.CSG.toMesh(i,n.matrix),n.material=t,n.position.set(-35,0,-28),n.castShadow=!0,n.receiveShadow=!0,a.add(n),a}createRightWall(){let e=new o.Group,t=this.getBricksMaterial(10,1),a=new o.BoxGeometry(9,3,33),r=new o.Mesh(a,t.clone());r.updateMatrix();let n=this.createEmptyBox(r),i=new o.BoxGeometry(9,.2,.1),s=new o.Mesh(i);s.position.set(0,.9,16.5),s.updateMatrix();let d=S.CSG.fromMesh(s);n=n.union(d),s=new o.Mesh(i),s.position.set(0,.3,16.5),s.updateMatrix(),d=S.CSG.fromMesh(s),n=n.union(d),s=new o.Mesh(i),s.position.set(0,-.9,16.5),s.updateMatrix(),d=S.CSG.fromMesh(s),n=n.union(d),i=new o.BoxGeometry(.1,.2,33),s=new o.Mesh(i),s.position.set(-4.5,.9,0),s.updateMatrix(),d=S.CSG.fromMesh(s),n=n.union(d),s=new o.Mesh(i),s.position.set(-4.5,.3,0),s.updateMatrix(),d=S.CSG.fromMesh(s),n=n.union(d),s=new o.Mesh(i),s.position.set(-4.5,-.9,0),s.updateMatrix(),d=S.CSG.fromMesh(s),n=n.union(d);let h=new o.BoxGeometry(.3*3,.6*3,4);for(var l=0;l<3;++l){let e=new o.Mesh(h.clone());e.position.set(3*l-3,0,15),e.updateMatrix();let t=S.CSG.fromMesh(e);n=n.subtract(t)}for(l=0;l<10;l++){let e=new o.Mesh(h.clone());e.rotateY(Math.PI/2),e.position.set(-4.5,0,3*l-6),e.updateMatrix();let t=S.CSG.fromMesh(e);n=n.subtract(t)}return r=S.CSG.toMesh(n,r.matrix),r.material=t,r.position.set(35,0,-28),r.castShadow=!0,r.receiveShadow=!0,e.add(r),e}createFloor(){let e=new o.Group,t=new o.PlaneGeometry(9,9,1),a=new o.Mesh(t,new o.MeshStandardMaterial({color:8947848,side:o.DoubleSide}));a.castShadow=!0,a.receiveShadow=!0,a.rotation.x=-Math.PI/2,a.receiveShadow=!0,a.castShadow=!0,a.position.set(0,4.5,-40),e.add(a);let r=a.clone();r.position.set(0,7.5,-40),e.add(r);let n=a.clone();n.position.set(0,10.5,-40),e.add(n);let i=a.clone();return i.position.set(0,1.5,-40),e.add(i),e}createMainWall(){let e=this.getBricksMaterial(25,1),t=new o.BoxGeometry(78,3,9),a=new o.Mesh(t);a.updateMatrix();let r=this.createEmptyBox(a),n=new o.BoxGeometry(78,.2,.1),i=new o.Mesh(n);i.position.set(0,.9,4.5),i.updateMatrix();let s=S.CSG.fromMesh(i);r=r.union(s),i=new o.Mesh(n),i.position.set(0,.3,4.5),i.updateMatrix(),s=S.CSG.fromMesh(i),r=r.union(s),i=new o.Mesh(n),i.position.set(0,-.9,4.5),i.updateMatrix(),s=S.CSG.fromMesh(i),r=r.union(s);let d=new o.BoxGeometry(.3*3,.6*3,4);for(var h=0;h<19;h++){if(9===h)continue;let e=new o.Mesh(d.clone());e.position.set(3*h-27,0,4.5),e.updateMatrix();let t=S.CSG.fromMesh(e);r=r.subtract(t)}let l=new o.BoxGeometry(.3*3*1.5,.6*3*1.5,3),c=new o.Mesh(l);c.position.set(0,0,5),c.updateMatrix(),r=r.subtract(S.CSG.fromMesh(c));let p=S.CSG.toMesh(r,a.matrix);return p.material=e,p.position.set(0,0,-40),p.castShadow=!0,p.receiveShadow=!0,p}createTower(e){let t=this.getBricksMaterial(3,3),a=e?2:3,r=new o.BoxGeometry(9,12,9),n=new o.Mesh(r);n.updateMatrix();let i=this.createEmptyBox(n),s=new o.BoxGeometry(.3*3,.6*3,5);for(var d=0;d<a;++d)for(var h=0;h<3;h++){let e=new o.Mesh(s.clone());e.position.set(3*h-3,3*d-4,4.5),e.updateMatrix();let t=S.CSG.fromMesh(e);i=i.subtract(t)}return n=S.CSG.toMesh(i,n.matrix),n.material=t,n.position.set(0,7,-40),n.castShadow=!0,n.receiveShadow=!0,n}createRoof(){let e=this.getSnowMaterial(3,3),t=new o.Group,a=new o.CylinderBufferGeometry(0,3*2.2,4,4),r=new o.Mesh(a,e.clone());r.rotation.y=45*Math.PI/180,r.position.set(0,15,-40),r.matrixAutoUpdate=!1,r.updateMatrix(),t.add(r);let n=this.getSnowMaterial(44,4),i=new o.CylinderBufferGeometry(3,3*2.2,2,4);var s=new o.Mesh(i,n.clone());s.rotation.y=45*Math.PI/180,s.updateMatrix();for(var d=S.CSG.fromMesh(s.clone()),h=1;h<11;++h){let e=s.clone();e.position.set(3*h,0,0),e.updateMatrix();let t=S.CSG.fromMesh(e);d=d.union(t)}let l=new o.BoxGeometry(9,10.5,10.5),c=new o.Mesh(l,n.clone());c.position.set(35.1,-3,0),c.updateMatrix();let p=S.CSG.fromMesh(c);d=d.subtract(p),(s=S.CSG.toMesh(d,s.matrix)).material=n.clone(),s.castShadow=!0,s.receiveShadow=!0,s.position.set(11.7*-3,2.5,-40),s.updateMatrix(),t.add(s);let w=s.clone();w.rotateY(Math.PI),w.position.set(3*11.7,2.5,-40),t.add(w);let u=w.clone();u.rotateY(-Math.PI/2),u.position.set(3*11.7,2.5,-16);let M=new o.Mesh(new o.BoxGeometry(10,10,10));M.position.set(3*11.7,2.5,-43),u=this.substr(u,M),u.material=n.clone(),u.castShadow=!0,u.receiveShadow=!0,u.updateMatrix(),t.add(u);let m=u.clone();return m.position.set(11.7*-3,2.5,-16),t.add(m),t}addRooms(){let e=new o.Group,t=new o.PlaneGeometry(3,9,1),a=new o.Mesh(t,new o.MeshStandardMaterial({color:8947848,side:o.DoubleSide}));a.rotateZ(Math.PI/2),a.rotateX(Math.PI/2),a.castShadow=!0,a.receiveShadow=!0,a.receiveShadow=!0,a.castShadow=!0;for(var r=-3;r<3;++r)a.position.set(-4.5-9*r,0,-40),e.add(a.clone());return a.rotateX(Math.PI/2),a.position.set(35,0,-20.5),e.add(a.clone()),a.position.set(-35,0,-20.5),e.add(a.clone()),e}addDoor(e){let t=this.getDoorMaterial();const a=new o.BoxGeometry(.3*3*1.5,.6*3*1.5,.1*3);a.applyMatrix4((new o.Matrix4).makeTranslation(3*-.15*1.5,3*-.1*1.5,-1.5)),a.center(),a.applyMatrix4((new o.Matrix4).makeTranslation(.2*3*1.5,0,0));const r=t.clone();r.color.setHex(3355443);const n=[t,t,t,t,t,t,r,r,r],i=new o.CylinderGeometry(.09,.09,.045,16);i.applyMatrix4((new o.Matrix4).makeRotationX(Math.PI/2)),i.applyMatrix4((new o.Matrix4).makeTranslation(.3*3*1.5,0,.05*3)),a.merge(i,i.matrix,6);const s=new o.Mesh(a,n);return s.position.set(-.9,-.3,-35.6),s.castShadow=!0,s.userData.interact=function(){0===s.rotation.y?f(s,-75*Math.PI/180,e):f(s,0,e)}.bind(s),this.interactionObjects.push(s),s}addBalcony(){let e=this.getDarkWoodMaterial(),t=this.getMarbleMaterial(),a=new o.Group,r=new o.BoxGeometry(7.5,.2,1.5),n=new o.Mesh(r,e);n.castShadow=!0,n.receiveShadow=!0,a.add(n);let i=new o.Group,s=new o.CylinderGeometry(.1,.06,.4,52),d=new o.CylinderGeometry(.06,.06,.4,52),h=new o.CylinderGeometry(.06,.1,.4,52),l=t,c=new o.Mesh(s,l);i.add(c),c=new o.Mesh(d,l),c.position.y-=.4,i.add(c),c=new o.Mesh(h,l),c.position.y-=.8,i.add(c);for(var p=0;p<7;++p)i.position.set(3*-2.4/2+1.2*p,1.1,3/4.5),a.add(i.clone());return r=new o.BoxGeometry(7.5,.1,.2),n=new o.Mesh(r,e),n.castShadow=!0,n.receiveShadow=!0,n.position.set(0,1.3,3/4.5),a.add(n),r=new o.BoxGeometry(.2,.1,1.5),n=new o.Mesh(r,e),n.castShadow=!0,n.receiveShadow=!0,n.position.set(3*-2.4/2,1.3,3/4.5-3/4),a.add(n),n=n.clone(),n.position.set(2.4*3/2,1.3,3/4.5-3/4),a.add(n),a.add(i),a.position.set(0,4.5,-35),a}addVisor(e,t,a,r){let n=new o.Group,i=new o.BoxGeometry(.3*3,.1,.2),s=new o.MeshPhongMaterial({color:16777215}),d=new o.Mesh(i,s);return d.rotateZ(Math.PI/8),n.add(d),d=d.clone(),d.rotateZ(-Math.PI/4),d.position.x+=.75,n.add(d),i=new o.BoxGeometry(.3*3*.9,.05,.15),s=new o.MeshPhongMaterial({color:14798786}),d=new o.Mesh(i,s),d.position.y-=.09,d.rotateZ(Math.PI/8),n.add(d),d=d.clone(),d.rotateZ(-Math.PI/4),d.position.x+=.75,n.add(d),n.rotateY(e),n.position.set(t,a,r),n}substr(e,t){e.updateMatrix(),t.updateMatrix();let a=S.CSG.fromMesh(e),o=S.CSG.fromMesh(t);return S.CSG.toMesh(a.subtract(o),e.matrix)}createEmptyBox(e){let t=e.clone();t.scale.multiplyScalar(.95),t.updateMatrix();let a=S.CSG.fromMesh(e),o=S.CSG.fromMesh(t);return a.subtract(o)}getDarkWoodMaterial(){const e=this.textureLoader.load(b);return e.wrapT=o.RepeatWrapping,e.wrapS=o.RepeatWrapping,e.repeat.set(1,1),new o.MeshStandardMaterial({color:7829367,roughness:.5,flatShading:!0,vertexColors:!0,map:e})}getBricksMaterial(e,t){const a=this.textureLoader.load(y);return a.wrapT=o.RepeatWrapping,a.wrapS=o.RepeatWrapping,a.repeat.set(e,t),new o.MeshStandardMaterial({color:16777215,roughness:.5,flatShading:!0,vertexColors:!0,map:a})}getSnowMaterial(e,t){let a=this.textureLoader.load(u);return a.wrapT=o.RepeatWrapping,a.wrapS=o.RepeatWrapping,a.repeat.set(e,t),new o.MeshStandardMaterial({color:16777215,map:a})}getDoorMaterial(){const e=this.textureLoader.load(G);return e.wrapT=o.RepeatWrapping,e.wrapS=o.RepeatWrapping,e.repeat.set(1,1),new o.MeshStandardMaterial({color:16777215,roughness:.5,flatShading:!0,vertexColors:!0,map:e})}getMarbleMaterial(){const e=this.textureLoader.load(v);return e.wrapT=o.RepeatWrapping,e.wrapS=o.RepeatWrapping,e.repeat.set(1,1),new o.MeshStandardMaterial({color:11184810,roughness:.5,flatShading:!0,vertexColors:!0,map:e})}}var P=a.p+"img/f22cdce6efda607d124d21f820d40ee4.jpg";class I{constructor(){this.moon=this.createMoon()}createMoon(){let e=new o.SphereGeometry(5,152,152),t=new o.Mesh(e);t.position.set(-100,40,0);let a=(new o.TextureLoader).load(P,(function(){t.material.needsUpdate=!0}));return t.material.envMap=a,t.material.transparent=!0,t.material.color=new o.Color(16777045),a.mapping=o.EquirectangularReflectionMapping,t}}class B{constructor(e,t,a,r){this.pointLight=new o.PointLight(16777045,2),this.pointLight.distance=12,this.pointLight.position.set(e,t,a),this.pointLight.castShadow=!0,this.time=this.getRandomInt(40)+10,r.add(this.pointLight),this.time%2==0&&(this.pointLight.visible=!1)}getRandomInt(e){return Math.floor(Math.random()*Math.floor(e))}checkLights(){this.time--,this.time>0||(this.pointLight.visible?(this.time=this.getRandomInt(30)+30,this.pointLight.visible=!1):(this.time=this.getRandomInt(20)+10,this.pointLight.visible=!0))}}class L{constructor(e,t,a,o,r,n,i){this.interactionObjects=[],this.paws=this.creatPaws(),this.paws.position.set(t,a,o),this.paws.rotateY(i),e.add(this.paws),this.bird=this.createBird(),this.bird.position.set(t,a,o),this.bird.rotateY(i),this.d=n,e.add(this.bird),this.time=r}createBird(){let e=new o.Group,t=new o.BoxGeometry(.3,.3,.3),a=new o.MeshPhongMaterial({color:926771}),r=new o.Mesh(t,a);r.castShadow=!0,r.receiveShadow=!0,e.add(r),t=new o.BoxGeometry(.2,.2,.2),r=new o.Mesh(t,a),r.position.set(.15,.15,0),r.castShadow=!0,r.receiveShadow=!0,e.add(r),t=new o.BoxGeometry(.1,.15,.15),r=new o.Mesh(t,a),r.rotateZ(Math.PI/16),r.position.set(-.15,-.1,0),r.castShadow=!0,r.receiveShadow=!0,e.add(r),t=new o.BoxGeometry(.2,.15,.15),r=new o.Mesh(t,a),r.rotateY(Math.PI/16),r.position.set(0,0,-.1),r.castShadow=!0,r.receiveShadow=!0,e.add(r),r=r.clone(),r.rotateY(-Math.PI/8),r.position.set(0,0,.1),e.add(r);let n=new o.BoxGeometry(.2,.05,.1);a=new o.MeshPhongMaterial({color:16737792}),r=new o.Mesh(n,a),r.position.set(.25,.15,0),e.add(r);let i=this.paws;for(var s in e.children)e.children[s].userData.interact=function(){var t=Math.random()>.5?Math.random()*Math.PI:-Math.random()*Math.PI;f(e,t),f(i,t);var a=Math.random()>.5?Math.random():-Math.random(),o=Math.random()>.5?Math.random():-Math.random();g(e,a,o),g(i,a,o),t=Math.random()>.5?Math.random()*Math.PI:-Math.random()*Math.PI,f(e,t),f(i,t)}.bind(e.children[s]);return e}creatPaws(){let e=new o.Group,t=new o.CylinderGeometry(.035,.035,.3,52),a=new o.MeshPhongMaterial({color:16737792}),r=new o.Mesh(t,a);return r.position.set(0,-.2,.05),e.add(r),r=r.clone(),r.position.set(0,-.2,-.05),e.add(r),e}update(){this.time--,this.time>=10&&this.time<=75||(this.time<5&&this.time>0?this.bird.rotateZ(Math.PI/8):0!==this.time?this.time>5&&this.time<10&&this.bird.rotateZ(-Math.PI/8):this.time=parseInt(Math.round(50*this.d)))}}var W=a.p+"img/e50528e7bec669661ba8a40ec0e15347.jpg";class R{constructor(){this.clock=this.createClock(),this.arrowS=this.createArrow(!0),this.arrowS.rotateZ(Math.PI/2),this.arrowM=this.createArrow(!1),this.arrowM.rotateZ(Math.PI/2),this.second=0,this.i=0}createClock(){let e=new o.Group,t=new o.CylinderGeometry(2.1,2.1,.1,52),a=this.getWoodMaterial(),r=new o.Mesh(t,a);r.position.y-=.01,r.castShadow=!0,r.receiveShadow=!0,e.add(r),t=new o.CylinderGeometry(2,2,.1,52),a=this.getMetalMaterial(16777215),r=new o.Mesh(t,a),r.castShadow=!0,r.receiveShadow=!0,e.add(r);let n=new o.CylinderGeometry(.1,.1,.03,16);a=this.getMetalMaterial(3355443);let i=new o.Mesh(n,a);return i.position.y+=.1,e.add(i),e.rotateX(Math.PI/2),e.position.set(0,10,-35.5),e}createArrow(e){let t=2.8;e&&(t=3.8);let a=new o.BoxGeometry(t,.1,.05),r=this.getMetalMaterial(3355443),n=new o.Mesh(a,r),i=new o.Mesh(new o.BoxGeometry(4,.1,.05));return i.position.x=-2,n=this.substr(n,i),n.material=r,n.castShadow=!0,n.receiveShadow=!0,n.position.set(0,10,-35.4),n}updateArrow(){let e=parseInt((new Date).getTime()/1e3)%60;e!==this.second&&(this.i++,this.i%60==0&&(this.i=0,this.arrowM.rotateZ(-Math.PI/30)),this.second=e,this.arrowS.rotateZ(-Math.PI/30))}substr(e,t){e.updateMatrix(),t.updateMatrix();let a=S.CSG.fromMesh(e),o=S.CSG.fromMesh(t);return S.CSG.toMesh(a.subtract(o),e.matrix)}getWoodMaterial(){const e=(new o.TextureLoader).load(b);return e.wrapT=o.RepeatWrapping,e.wrapS=o.RepeatWrapping,e.repeat.set(1,1),new o.MeshStandardMaterial({color:7829367,roughness:.5,flatShading:!0,vertexColors:!0,map:e})}getMetalMaterial(e){const t=(new o.TextureLoader).load(W);return t.wrapT=o.RepeatWrapping,t.wrapS=o.RepeatWrapping,t.repeat.set(1,1),new o.MeshStandardMaterial({color:e,roughness:.5,flatShading:!0,vertexColors:!0,map:t})}}class E{constructor(e,t,a,o,r,n){this.tree=this.createTree(),this.tree.position.set(e,t,a),this.tree.scale.set(.2*o,.2*r,.2*n)}createTree(){let e=new o.Group,t=new o.MeshPhysicalMaterial({color:4007959}),a=new o.MeshPhysicalMaterial({color:2968606}),r=new o.Mesh(new o.CylinderGeometry(2,2,12,6,1,!0),t);r.position.y=6,r.receiveShadow=!0,r.castShadow=!0;let n=new o.Mesh(new o.CylinderGeometry(0,10,14,8),a);n.position.y=18,n.receiveShadow=!0,n.castShadow=!0,n.material=a;let i=new o.Mesh(new o.CylinderGeometry(0,8,13,8),a);i.position.y=25,i.receiveShadow=!0,i.castShadow=!0;let s=new o.Mesh(new o.CylinderGeometry(0,6,12,8),a);return s.position.y=32,s.receiveShadow=!0,s.castShadow=!0,e.add(r),e.add(n),e.add(i),e.add(s),e}}if(r.a.isWebGLAvailable())!function(){let e=document.body,t=new o.Clock,a=0,r=new o.Scene,i=new d(e),c=new h(i.threeRenderer),p=new s(c.threeCamera,i.threeRenderer.domElement);p.threeControls.update();let m=[new L(r,-20,-1.2,-20,10,1,-Math.PI/8),new L(r,-16,-1.2,-16,20,1.1,Math.PI/8),new L(r,-33,3.8,-33,15,.8,Math.PI/8),new L(r,-14,-1.2,-23,25,.9,5/4*Math.PI)],f=new w(r),g=new o.SphereBufferGeometry(400,32,15),S=n.skyDomeShaderMaterial(),x=new o.Mesh(g,S);r.add(x),r.add(function(){let e=(new o.TextureLoader).load(u);e.wrapT=o.RepeatWrapping,e.wrapS=o.RepeatWrapping,e.repeat.set(500,500);let t=new o.MeshStandardMaterial({color:16777215,map:e});var a=new o.PlaneGeometry(500,500,1,1),r=t,n=new o.Mesh(a,r);return n.receiveShadow=!0,n.castShadow=!0,n.rotation.x=-Math.PI/2,n.position.y=-1.5,n}()),function(e){var t=new o.HemisphereLight(16777215,16777215,.3);t.color.setHSL(.6,1,.6),t.groundColor.setHSL(.095,.8,.5),t.position.set(0,30,0),e.add(t);var a=new o.DirectionalLight(16777215,.3);a.position.set(-50,80,0),a.castShadow=!0,a.shadow.camera.near=10,a.shadow.camera.far=200,a.shadow.camera.left=-50,a.shadow.camera.bottom=-50,a.shadow.camera.right=50,a.shadow.camera.top=50,a.shadow.bias=1e-4,a.target.position.set(20,-2,0),a.shadow.radius=1,e.add(a),e.add(a.target);let r=new o.PointLight(16777045,3);r.distance=12,r.position.set(0,0,40),r.castShadow=!0,e.add(r)}(r);let y=[new B(-35,0,-28,r),new B(0,0,-40,r),new B(6,0,-40,r),new B(12,0,-40,r),new B(18,0,-40,r),new B(-6,0,-40,r),new B(-12,0,-40,r),new B(-18,0,-40,r),new B(-24,0,-40,r),new B(24,0,-40,r),new B(0,3,-40,r),new B(0,9,-40,r),new B(35,0,-28,r),new B(-35,0,-18,r),new B(35,0,-18,r)];r.add((new I).moon),r.add(new C(!0,c.threeCamera).winery);let v=new C(!1,c.threeCamera).winery;v.rotateX(Math.PI),v.rotateZ(Math.PI),r.add(v);let G=new R;r.add(G.clock),r.add(G.arrowS),r.add(G.arrowM),new l(r,c.threeCamera,e),r.add(new E(-23,-2.5,-30,1.3,1.3,1.3).tree),r.add(new E(23,-2.5,-30,1.3,1.3,1.3).tree),r.add(new E(23,-2.5,30,1.3,1.3,1.3).tree),r.add(new E(26,-2.5,33,1.3,1.5,1.3).tree),r.add(new E(-26,-2.5,33,1.3,1.5,1.3).tree),r.add(new E(-23,-2.5,30,1.3,1.3,1.3).tree),r.add(new E(-25,-2.3,25,.9,1.1,.9).tree);var b=0;!function e(){requestAnimationFrame(e),a=t.getDelta(),function(e){if(M.b(),f.update(e),p.threeControls.update(),b++%10==0)for(var t in y)y[t].checkLights();for(var a in G.updateArrow(),m)m[a].update()}(a),i.render(r,c.threeCamera)}()}();else{let e=r.a.getWebGLErrorMessage();document.body.appendChild(e)}},7:function(e,t,a){var o=a(8),r=a(9);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var n={insert:"head",singleton:!1};o(r,n);e.exports=r.locals||{}},9:function(e,t,a){"use strict";a.r(t);var o=a(5),r=a.n(o)()(!1);r.push([e.i,"body {\n    margin: 0;\n    padding: 0;\n    background-color: #fff;\n    overflow: hidden;\n}\ncanvas {\n    width: 100%;\n    height: 100%;\n}\n",""]),t.default=r}});